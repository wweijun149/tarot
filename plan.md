# Tarot Web App (React + Rust/Wasm) é–‹ç™¼è—åœ– v2.0

## å°ˆæ¡ˆæ¦‚è¿°
ä½¿ç”¨ React (Vite) ä½œç‚ºå‰ç«¯ä»‹é¢ï¼ŒRust ç·¨è­¯ç‚º WebAssembly (Wasm) ä½œç‚ºæ ¸å¿ƒé‹ç®—å¼•æ“ï¼Œå¯¦ä½œä¸€å€‹å…·å‚™æ´—ç‰Œã€æŠ½ç‰Œèˆ‡æ­£é€†ä½åˆ¤å®šåŠŸèƒ½çš„å¡”ç¾…ç‰Œ Web æ‡‰ç”¨ã€‚çµåˆè‡ªå‹•åŒ– CI/CD æµç¨‹ç¢ºä¿ç¨‹å¼ç¢¼å“è³ªèˆ‡å¿«é€Ÿéƒ¨ç½²ã€‚

---

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹åœ– (System Architecture)

å°ˆæ¡ˆæ¡ç”¨åš´æ ¼çš„å‰å¾Œç«¯ (Wasm) åˆ†é›¢æ¶æ§‹ï¼Œç¢ºä¿é‹ç®—é‚è¼¯èˆ‡ç•«é¢æ¸²æŸ“äº’ä¸å¹²æ“¾ï¼š

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚            UI Layer: React (Vite)       â”‚
    â”‚ --------------------------------------- â”‚
    â”‚ - ç‹€æ…‹ç®¡ç† (Deck State, Drawn Cards)    â”‚
    â”‚ - å‹•ç•«å‘ˆç¾ (Framer Motion 3D ç¿»è½‰)      â”‚
    â”‚ - é»æ“Šäº‹ä»¶ç›£è½èˆ‡ç•«é¢æ¸²æŸ“                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ (1. å‘¼å«æŠ½ç‰Œæ–¹æ³•)
                       â”‚ (4. å›å‚³å¡ç‰Œè³‡æ–™ JSON)
                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        Bridge Layer: wasm-bindgen       â”‚
    â”‚ --------------------------------------- â”‚
    â”‚ - è¨˜æ†¶é«”å…±äº«èˆ‡è³‡æ–™å‹åˆ¥è½‰æ› (serde)      â”‚
    â”‚ - ç”¢ç”Ÿè®“ JS å¯ä»¥ç›´æ¥èª¿ç”¨çš„è† æ°´ä»£ç¢¼      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ (2. è§¸ç™¼ Rust å‡½æ•¸)
                       â”‚ (3. åºåˆ—åŒ– Struct)
                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        Core Engine: Rust WebAssembly    â”‚
    â”‚ --------------------------------------- â”‚
    â”‚ - TarotDeck (78 å¼µç‰Œçš„ç‹€æ…‹èˆ‡çµæ§‹)       â”‚
    â”‚ - æ´—ç‰Œæ¼”ç®—æ³• (Fisher-Yates)             â”‚
    â”‚ - éš¨æ©Ÿæ­£é€†ä½åˆ¤å®š (getrandom js feature) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

---

## ğŸš€ CI/CD è‡ªå‹•åŒ–æµæ°´ç·š (GitHub Actions)

ä½¿ç”¨ GitHub Actions å»ºç«‹è‡ªå‹•åŒ–å·¥ä½œæµï¼Œåˆ©ç”¨æœ¬æ©Ÿçš„ self-hosted runner ä¾†åŸ·è¡Œåƒé‡çš„ Rust ç·¨è­¯å·¥ä½œã€‚

- [ ] **éšæ®µä¸€ï¼šLint & Test (ç¨‹å¼ç¢¼æª¢æŸ¥)**
  - è§¸ç™¼æ™‚æ©Ÿï¼šPush åˆ° `main` åˆ†æ”¯æˆ–å»ºç«‹ Pull Requestã€‚
  - å‰ç«¯ï¼šåŸ·è¡Œ `npm run lint` æª¢æŸ¥ React èªæ³•ã€‚
  - å¾Œç«¯ (Rust)ï¼šåŸ·è¡Œ `cargo clippy` æª¢æŸ¥ Rust èªæ³•ï¼Œ`cargo test` åŸ·è¡Œå–®å…ƒæ¸¬è©¦ã€‚
- [ ] **éšæ®µäºŒï¼šBuild (ç·¨è­¯èˆ‡æ‰“åŒ…)**
  - Rust Wasm Buildï¼šåœ¨ self-hosted runner ä¸ŠåŸ·è¡Œ `wasm-pack build --target web`ã€‚
  - React Buildï¼šåŸ·è¡Œ `npm install` èˆ‡ `npm run build`ï¼Œå°‡ Wasm æ¨¡çµ„èˆ‡ React éœæ…‹æª”æ‰“åŒ…ã€‚
- [ ] **éšæ®µä¸‰ï¼šDeploy (éƒ¨ç½²)**
  - å°‡æ‰“åŒ…å¾Œçš„ `dist` è³‡æ–™å¤¾è‡ªå‹•æ¨é€åˆ° GitHub Pages (æˆ– Vercel/Netlify ç­‰éœæ…‹è¨—ç®¡å¹³å°)ã€‚

---

## ğŸ› ï¸ é–‹ç™¼éšæ®µä»»å‹™æ¸…å–®

### éšæ®µ 0ï¼šç’°å¢ƒå»ºç½®èˆ‡é©—è­‰ (Environment Setup)
- [ ] **ç¢ºèª Rust èˆ‡ C++ ç·¨è­¯ç’°å¢ƒ** (è§£æ±º MSVC `link.exe` å•é¡Œ)ã€‚
- [ ] **ç¢ºèª wasm-pack ç‹€æ…‹** (çµ‚ç«¯æ©ŸåŸ·è¡Œ `wasm-pack --version`)ã€‚
- [ ] **åˆå§‹åŒ–å°ˆæ¡ˆç›®éŒ„**ï¼š
  - å»ºç«‹ `tarot-app` (Vite/React)ã€‚
  - å»ºç«‹ `tarot-engine` (Rust lib)ã€‚

### éšæ®µ 1ï¼šRust Wasm æ ¸å¿ƒå¼•æ“ (`tarot-engine`)
- [ ] **é…ç½® `Cargo.toml`**ï¼šè¨­å®š `crate-type = ["cdylib"]`ï¼Œå¼•å…¥ `wasm-bindgen`, `serde`, `rand`, `getrandom` (é–‹å•Ÿ `js` feature)ã€‚
- [ ] **å®šç¾©è³‡æ–™çµæ§‹ (Struct & Enum)**ï¼šå®šç¾© `Card`, `Orientation` èˆ‡ `TarotDeck`ã€‚
- [ ] **å¯¦ä½œæ ¸å¿ƒé‚è¼¯**ï¼š`new()`, `shuffle()`, `draw()`ï¼Œä¸¦å¥—ç”¨ `#[wasm_bindgen]`ã€‚
- [ ] **ç·¨è­¯æ¸¬è©¦**ï¼šåŸ·è¡Œ `wasm-pack build --target web`ã€‚

### éšæ®µ 2ï¼šReact å‰ç«¯ä»‹é¢ (`tarot-app`)
- [ ] **å¼•å…¥ Wasm æ¨¡çµ„**ï¼š`npm install ../tarot-engine/pkg`ã€‚
- [ ] **ç‹€æ…‹ç®¡ç†**ï¼šä½¿ç”¨ `useEffect` è¼‰å…¥ Wasmï¼Œå»ºç«‹ç‰Œçµ„èˆ‡æŠ½ç‰Œç‹€æ…‹ã€‚
- [ ] **UI å¯¦ä½œèˆ‡äº’å‹•**ï¼šå»ºç«‹ `<Card />` çµ„ä»¶èˆ‡æ“ä½œæŒ‰éˆ•ã€‚
- [ ] **å‹•ç•«èˆ‡è¦–è¦ºå„ªåŒ–**ï¼šæ ¹æ“š `Orientation` å¯¦ä½œé€†ä½ CSS ç¿»è½‰èˆ‡æŠ½ç‰Œå‹•ç•«ã€‚

### éšæ®µ 3ï¼šCI/CD è…³æœ¬å¯¦ä½œ
- [ ] åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å»ºç«‹ `.github/workflows/deploy.yml`ã€‚
- [ ] é…ç½® self-hosted runner æ¨™ç±¤èˆ‡æ‰“åŒ…æŒ‡ä»¤ã€‚